# eSLP

A. Description

The m-files in this repository implement the eSLP algorithm. The documentation that follows addresses "core" issues; requirements, how to verify the results and videos generated by the experiments we have conducted so far, and instructions on how to run them. Currently, we are working on modifying the m-files because they are tailor-made, e.g., dynamics, cost functions, for three specific experiments, and they along with compiler related files need to be installed in predetermined locations in the local drive. 

B. Requirements

1. Matlab (We used version 2019b)
2. Falcon.m found here https://www.fsd.lrg.tum.de/software/falcon-m/ (We used v1.24.2002191427)
3. TDM-GCC compiler (We used TDM-GCC Compiler Suite for Windows GCC 5 Series / GDB 7.9 Series and installed the MinGW-w64 64/32-bit Edition)

C. How-to

C.1. How-To : Verify results and videos generated by eSLP using only Matlab without installing any additional packages

Donwload any zip file, uncompress, and run FinalResults.m. First, we display the results, and then generate a series of videos that are stored in the folder (.avi). Upon completion all the partial results, i.e., from each agent, are summarized in the following variables :

a) Variable TotalResults includes time, states, control, etc.

b) Variable SolverStats includes the results from IPOPT for each subproblem solved by each agent. The [x,y,z] elements correspond to: 
- In x we store whether the subproblem was solved successfully, in which case IPOPT returns 0, or not, where IPOPT returns 0. In our results all subproblems have been solved successfully, and to easen verification a check is conducted when FinalResults.m is run. 
- y is the number of iterations required to solve the subproblem.
- z is the time required to solve the subproblem. 

Setup A involves one moving obstacle and time-changing terrain (expanding puddle). TwoObstacles involves two deforming obstacles moving on meander shaped rivers. Setup C involves a bridge crane system. 

C.2. How-To : Setup required software
1. Request a copy of Falcon.m using the link in B2. The support (on all issues) is great and one will be send soon. 
2. Open matlab and run the setup required by Falcon.m; the process is thoroughly explained in the accompanying manual UserGuideMain.pdf (Chapter 2) that is included in the zip file. Falcon.m will automatically download many of the packages needed, e.g., IPOPT solver. We installed Falcon on folder C:\FALCON.m.v1.24.2002191427\falcon.
3. There are two additional files needed for the compiler to run smoothly (This process may have changed for versions after 2019b); both are included in the repository. The first is configuremingw.p information for which can be found here https://www.mathworks.com/matlabcentral/answers/313298-i-already-have-mingw-on-my-computer-how-do-i-configure-it-to-work-with-matlab. The second is compile.m needed to set the environment variable properly. Also, depending on the subproblem solved files from here https://www.mathworks.com/matlabcentral/fileexchange/9542-minimum-volume-enclosing-ellipsoid may be used. They are included in every folder.

C.3. How-To : Run provided examples (requires C.2.)
1. Browse to the folder where Falcon was installed, and unzip the files there. Each experiment should be placed in a different subfolder of the main Falcon folder (the one where you installed Falcon). For example, we placed the folder SetupA of this repository in C:\FALCON.m.v1.24.2002191427\falcon\SetupA.
2. Run file configuremingw.p and select the folder where the compiler was placced. We installed GCC on C:\TDM-GCC-64 and suggest this is the one used.
3. Run file compile.m. This sets the "environment" variable. We installed the necessary compiler files in C:\mingw-w64\x86_64-5.3.0-posix-seh-rt_v4-rev0\mingw64. If a different location was used when installing change accordingly in the compile.m (first line - setenv command).
4. Run CleanSubOptimal.m so to clean up existing files.
5. Run main.m and upon completion FinalResults.m.
